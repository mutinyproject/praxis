#!/bin/sh

repo_list() {
    if [ "${1}" = '--paths' ];then
        repo_list_paths=true
    fi

    set -- "${praxis_repo_dir}"/*
    [ -d "${1}" ] || { debug "No repositories found."; exit 1; }

    while [ $# -gt 0 ];do
        printf '%s %s\n' \
            $(cat "${1}"/metadata/importance 2>/dev/null || continue) \
            $([ "${repo_list_paths}" = 'true' ] && printf '%s' "${1}" || printf '%s' "${1##*/}")
        shift
    done | sort -k 1nr | cut -d' ' -f2-

    unset repo_list_paths
}

