#!/bin/sh

. "@@libdir@@"/file.sh

# at a bare minimum, a directory is a theory directory if it contains a theory or a library.
is_theory_dir() {
	[ -d "${1}" ] || error -d "'%s' is not a directory\n" "${1}"

	if [ -e "${1}"/theory -a -s "${1}"/theory ] || [ -e "${1}"/libraries -a -s "${1}"/libraries ]; then
		return 0
	fi

	return 1
}

is_repository_dir() {
	[ -d "${1}" ] || error -d "'%s' is not a directory\n" "${1}"
	if [ -d "${1}" -a -x "${1}" ]; then
		case "$(readlink -f "${1}")" in
			"@@dbdir@@"/repositories/*)
				return 0
				;;
		esac
	fi
	return 1
}

is_package_dir() {
	[ -d "${1}" ] || error -d "'%s' is not a directory\n" "${1}"
	if [ -d "${1}" -a -x "${1}" ]; then
		case "$(readlink -f "${1}")" in
			"@@dbdir@@"/repositories/*/packages/*)
				return 0
				;;
		esac
	fi
	return 1
}

is_library_dir() {
	[ -d "${1}" ] || error -d "'%s' is not a directory\n" "${1}"
	if [ -d "${1}" -a -x "${1}" ]; then
		case "$(readlink -f "${1}")" in
			"@@dbdir@@"/repositories/*/libraries/*)
				return 0
				;;
		esac
	fi
	return 1
}

